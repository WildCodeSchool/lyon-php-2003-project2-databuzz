{% extends 'tvshowlayout.html.twig' %}

{% block title %}Season {{season.season_number}}{% endblock %}
{% block img_header %}{{ season.img }}{% endblock %}
{% block alt_img %}{{ tvshow.title }}{% endblock %}
{#       COMMENT : the "rating_season block matches 2 possible types of content; either the rating for the tvshow pqahge or the seasontitle for the season page       #}
{% block rating_season %}Season {{season.season_number}}{% endblock %}
{% block synopsis %}{{ season.synopsis }}{% endblock %}
{% block genre %}Genre : {% for genre in genres %}{{ genre.name }}  {% endfor %}{% endblock %}
{% block year %}Year {{ season.year }}{% endblock %}
{% block friends_watched %}Lucas, Jeff and Fran√ßois have watched it{% endblock %}
{% block watched %}Watched or not ?{% endblock %}
{% block next_episode %}S03E03{% endblock %}
{% block on_air %}On air : 23/04/2020{% endblock %}
{% block buzz %}{% endblock %}

{% block serietitle %}{{ tvshow.title }}{% endblock %}
{% block tvshowlayoutcontent %}

    {# Display Season Number generated by link clicked by user #}
    <div class="season-select-div">
        <select class="season-select" id="season-select">
            <option value="" disabled selected hidden>Choose a season</option>
            {% for tvshowSeason in tvshowSeasons %}
                <option value="/season/index/{{ tvshowSeason.season_number }}">Season {{ tvshowSeason.season_number }}</option>
            {% endfor %}
        </select>
    </div>


    <div id="accordion">
        {# Display one dropdown menu per episodes #}
        {% for episode in episodes %}
            <div class="card">
                <div class="card-header" id="headingOne">
                    <h5 class="mb-0">
                        <button class="btn btn-link" data-toggle="collapse" data-target="#collapse{{ loop.index }}"
                                aria-expanded="true" aria-controls="collapseOne">
                            <div class="row">
                                <div class="col-3">
                                    Image from API
                                </div>
                                <div class="col-3">
                                    <p>Episode {{ episode.episode_number }}</p>
                                    <br>
                                    <p>Aired on the {{ episode.air_date }}</p>
                                </div>
                                <div class="col">
                                    <p>{{ episode.name }}</p>
                                </div>
                            </div>
                        </button>
                    </h5>
                </div>

                <div id="collapse{{ loop.index }}" class="collapse show" aria-labelledby="headingOne"
                     data-parent="#accordion">
                    <div class="card-body">
                        <p>{{ episode.overview }}</p>
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>
{% endblock %}
{% block javascript %}
<script>
{# Script for the redirection through simply selecting a season in the "season-select" select tag #}
document.getElementById("season-select").onchange = function(){
    location.href=''+this.options[this.selectedIndex].value;
};
</script>
{% endblock %}